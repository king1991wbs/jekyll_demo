---
layout: post
title : 内存区域分类
---


本文整理自《王道-程序员求职宝典》
======


内存的区域主要分成这么几块：栈区、堆区、全局（静态）存储区、文字常量区、代码区（段）。
下面分别解释：

1）堆：由程序员手动分配和释放，完全不同与数据结构中的堆，分配方式类似链表。由malloc（c语言）或new（c++语言）来分配，free(c语言)和delete（c++语言）
释放。若程序员不释放，则在程序结束时由操作系统释放。

2）栈：由编译器自动分配和释放的，存放函数的参数值、局部变量的值等。操作方式类似数据结构中的栈。

3）全局（静态）存储区：存放全局变量和静态变量。包括DATA段（全局初始化区）与BSS段（全局未初始化区）。其中，初始化的全局变量和静态变量存放在DATA段
，未初始化的全局变量和未初始化的静态变量存放在BSS段。程序结束后由系统释放。

其中BSS段的特点是：在程序执行之前BSS段会自动清0。所以，未初始化的全局变量和静态变量在程序执行之前已经成0了。

4）文字常量区：常量字符串就是放在这里的。程序结束后由系统释放。

5）程序代码区：存放函数体的二进制代码。


举例：
<pre>
<code>
int k = 1;
void main()
{
    int i = 1;//局部变量，存放在栈区域
    char *j;//同上
    static int m = 1;//静态初始化变量，存放在全局（静态）存储区域

    char *n = "hello";/    变量n位于栈上，其内容为一地址，指向位于文字常量区的“hello”，此时“hello”在内存中只有一份拷贝：而语句“char a[] = "hello";
    则不同，a是一个位于栈上的有6个元素（含字符串末尾空字符）的数组，并将“hello”拷贝到它所占的内存中，此时内存中有两份“hello”拷贝
    */
    printf("栈区地址为：0X%x\n",&i);
    j = (char *)malloc(2);
    free(j);//及时释放
    printf("堆区地址为：0X%x\n",j);
    printf("全局变量地址为：0X%x\n",&k);
    printf("静态变量地址为：0X%x\n",&m);
    printf("文字常量区地址为：0X%x\n",n);
    printf("程序区地址为：0X%x\n",&main);
}
</code>
</pre>
